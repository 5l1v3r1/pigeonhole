require "vnd.dovecot.testsuite";

/*
 * Execution testing (currently just meant to trigger any segfaults)
 */

test "RFC Example 1" {
	if not test_compile "execute/draft-rfc-ex1.sieve" {
		test_fail "script compile failed";
	}

	if not test_execute {
		test_fail "script execute failed";
	}
}

test "RFC Example 2" {
	if not test_compile "execute/draft-rfc-ex2.sieve" {
		test_fail "script compile failed";
	}

	if not test_execute {
		test_fail "script execute failed";
	}
}

test "RFC Example 3" {
	if not test_compile "execute/draft-rfc-ex3.sieve" {
		test_fail "script compile failed";
	}

	if not test_execute {
		test_fail "script execute failed";
	}
}

test "RFC Example 5" {
	if not test_compile "execute/draft-rfc-ex5.sieve" {
		test_fail "script compile failed";
	}

	if not test_execute {
		test_fail "script execute failed";
	}
}

test "RFC Example 6" {
	if not test_compile "execute/draft-rfc-ex6.sieve" {
		test_fail "script compile failed";
	}

	if not test_execute {
		test_fail "script execute failed";
	}
}
