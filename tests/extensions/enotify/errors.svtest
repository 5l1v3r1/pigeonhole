require "vnd.dovecot.testsuite";
require "comparator-i;ascii-numeric";
require "relational";

require "enotify";


test "Invalid URL (FIXME: count only)" {
	if test_compile "errors/url.sieve" {
		test_fail "compile should have failed";
	}

	if not test_error :count "eq" :comparator "i;ascii-numeric" "2" {
		test_fail "wrong number of errors reported";
	}
}

test "Invalid mailto URL (FIXME: count only)" {
	if test_compile "errors/url-mailto.sieve" {
		test_fail "compile should have failed";
	}

	if not test_error :count "eq" :comparator "i;ascii-numeric" "4" {
		test_fail "wrong number of errors reported";
	}
}

test "Invalid mailto :from address (FIXME: count only)" {
	if test_compile "errors/from-mailto.sieve" {
		test_fail "compile should have failed";
	}

	if not test_error :count "eq" :comparator "i;ascii-numeric" "2" {
		test_fail "wrong number of errors reported";
	}
}
